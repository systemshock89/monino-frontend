{"version":3,"file":"../phone-input.min.js","sources":["phone-input.min.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n    phoneInput('input[type=tel]');\r\n});\r\n\r\nfunction phoneInput(selector){\r\n    const phoneInputs = document.querySelectorAll(selector);\r\n\r\n    const getInputNumbersValue = function (input) {\r\n        // Return stripped input value — just numbers\r\n        return input.value.replace(/\\D/g, '');\r\n    }\r\n\r\n    const onPhonePaste = function (e) {\r\n        const input = e.target,\r\n            inputNumbersValue = getInputNumbersValue(input);\r\n        const pasted = e.clipboardData || window.clipboardData;\r\n        if (pasted) {\r\n            const pastedText = pasted.getData('Text');\r\n            if (/\\D/g.test(pastedText)) {\r\n                // Attempt to paste non-numeric symbol — remove all non-numeric symbols,\r\n                // formatting will be in onPhoneInput handler\r\n                input.value = inputNumbersValue;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    const onPhoneInput = function (e) {\r\n        const input = e.target,\r\n            selectionStart = input.selectionStart;\r\n        let inputNumbersValue = getInputNumbersValue(input),\r\n            formattedInputValue = \"\";\r\n\r\n        if (!inputNumbersValue) {\r\n            return input.value = \"\";\r\n        }\r\n\r\n        if (input.value.length != selectionStart) {\r\n            // Editing in the middle of input, not last symbol\r\n            if (e.data && /\\D/g.test(e.data)) {\r\n                // Attempt to input non-numeric symbol\r\n                input.value = inputNumbersValue;\r\n            }\r\n            return;\r\n        }\r\n\r\n        if ([\"7\", \"8\", \"9\"].indexOf(inputNumbersValue[0]) > -1) {\r\n            if (inputNumbersValue[0] == \"9\") inputNumbersValue = \"7\" + inputNumbersValue;\r\n            const firstSymbols = (inputNumbersValue[0] == \"8\") ? \"8\" : \"+7\";\r\n            formattedInputValue = input.value = firstSymbols + \" \";\r\n            if (inputNumbersValue.length > 1) {\r\n                formattedInputValue += '(' + inputNumbersValue.substring(1, 4);\r\n            }\r\n            if (inputNumbersValue.length >= 5) {\r\n                formattedInputValue += ') ' + inputNumbersValue.substring(4, 7);\r\n            }\r\n            if (inputNumbersValue.length >= 8) {\r\n                formattedInputValue += '-' + inputNumbersValue.substring(7, 9);\r\n            }\r\n            if (inputNumbersValue.length >= 10) {\r\n                formattedInputValue += '-' + inputNumbersValue.substring(9, 11);\r\n            }\r\n        } else {\r\n            formattedInputValue = '+' + inputNumbersValue.substring(0, 16);\r\n        }\r\n        input.value = formattedInputValue;\r\n    }\r\n    const onPhoneKeyDown = function (e) {\r\n        // Clear input after remove last symbol\r\n        const inputValue = e.target.value.replace(/\\D/g, '');\r\n        if (e.keyCode == 8 && inputValue.length == 1) {\r\n            e.target.value = \"\";\r\n        }\r\n    }\r\n    for (const phoneInput of phoneInputs) {\r\n        phoneInput.addEventListener('keydown', onPhoneKeyDown);\r\n        phoneInput.addEventListener('input', onPhoneInput, false);\r\n        phoneInput.addEventListener('paste', onPhonePaste, false);\r\n    }\r\n}"],"names":["phoneInput","selector","phoneInputs","document","querySelectorAll","getInputNumbersValue","input","value","replace","onPhonePaste","e","target","inputNumbersValue","pasted","clipboardData","window","pastedText","getData","test","onPhoneInput","selectionStart","let","formattedInputValue","length","data","indexOf","firstSymbols","substring","onPhoneKeyDown","inputValue","keyCode","addEventListener"],"mappings":"AAIA,SAASA,WAAWC,GACVC,EAAcC,SAASC,iBAAiBH,CAAQ,EAEzB,SAAvBI,EAAiCC,GAEnC,OAAOA,EAAMC,MAAMC,QAAQ,MAAO,EAAE,CACxC,CAEqB,SAAfC,EAAyBC,GAC3B,IAAMJ,EAAQI,EAAEC,OACZC,EAAoBP,EAAqBC,CAAK,GAE9CO,EADWH,EAAEI,eAAiBC,OAAOD,iBAE/BE,EAAaH,EAAOI,QAAQ,MAAM,EACpC,MAAMC,KAAKF,CAAU,KAGrBV,EAAMC,MAAQK,EAI1B,CAEqB,SAAfO,EAAyBT,GAC3B,IAAMJ,EAAQI,EAAEC,OACZS,EAAiBd,EAAMc,eAC3BC,IAAIT,EAAoBP,EAAqBC,CAAK,EAC9CgB,EAAsB,GAE1B,GAAI,CAACV,EACD,OAAON,EAAMC,MAAQ,GAGrBD,EAAMC,MAAMgB,QAAUH,EAElBV,EAAEc,MAAQ,MAAMN,KAAKR,EAAEc,IAAI,IAE3BlB,EAAMC,MAAQK,IAK8B,CAAC,EAAjD,CAAC,IAAK,IAAK,KAAKa,QAAQb,EAAkB,EAAE,GAEtCc,EAAwC,MADbd,EAAL,KAAxBA,EAAkB,GAA+B,IAAMA,EACrCA,GAAkB,GAAa,IAAM,KAC3DU,EAAsBhB,EAAMC,MAAQmB,EAAe,IACpB,EAA3Bd,EAAkBW,SAClBD,GAAuB,IAAMV,EAAkBe,UAAU,EAAG,CAAC,GAEjC,GAA5Bf,EAAkBW,SAClBD,GAAuB,KAAOV,EAAkBe,UAAU,EAAG,CAAC,GAElC,GAA5Bf,EAAkBW,SAClBD,GAAuB,IAAMV,EAAkBe,UAAU,EAAG,CAAC,GAEjC,IAA5Bf,EAAkBW,SAClBD,GAAuB,IAAMV,EAAkBe,UAAU,EAAG,EAAE,IAGlEL,EAAsB,IAAMV,EAAkBe,UAAU,EAAG,EAAE,EAEjErB,EAAMC,MAAQe,EAClB,CACuB,SAAjBM,EAA2BlB,GAE7B,IAAMmB,EAAanB,EAAEC,OAAOJ,MAAMC,QAAQ,MAAO,EAAE,EAClC,GAAbE,EAAEoB,SAAqC,GAArBD,EAAWN,SAC7Bb,EAAEC,OAAOJ,MAAQ,GAEzB,CACA,IAAK,MAAMP,KAAcE,EACrBF,EAAW+B,iBAAiB,UAAWH,CAAc,EACrD5B,EAAW+B,iBAAiB,QAASZ,EAAc,CAAA,CAAK,EACxDnB,EAAW+B,iBAAiB,QAAStB,EAAc,CAAA,CAAK,CAEhE,CA/EAN,SAAS4B,iBAAiB,mBAAoB,WAC1C/B,WAAW,iBAAiB,CAChC,CAAC"}